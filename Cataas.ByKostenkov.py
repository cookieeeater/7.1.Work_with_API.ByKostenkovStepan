from tkinter import *
from tkinter import ttk
from PIL import Image, ImageTk
import requests
from io import BytesIO

ALLOWED_TAGS = [
    "#christmascat", "#scottishfold", ".", "2cats", "4", "62", "@Beardlyness", "A", "Angry", "B&W", "Baby", "Bed", "Beer", "Belfast", "BelfastMet", "Bengal", "Bester", "BigEar", "BigEars", "Black", "Black Scotish Cute", "Black and white", "Black cat", "BlackInWhite", "Blackcat", "Boba", "Bobo", "Box", "British", "Buckley", "Cat", "Cat in a faucet", "Cat surfing the tube", "Catto", "Chair", "Chocolate", "Christmas", "Christmas 🎄", "ColdCat", "Collar", "CryptoWorld Cat", "Cubbas", "Cubbers", "Cubbs", "Cubby", "Curious", "Cute", "Daiki", "Dark", "Evil", "FAT", "Fat", "Female", "Ferris", "Fierce", "Fluffy", "Friends", "Fulgencio", "Funny", "Going shopping?", "Gray", "GreenEyes", "Grey", "Grumpy", "Gustav", "Halloween", "HandInHand", "Happy", "Hemingway", "Hidden", "Hides", "Hiding", "Hitler", "Hugs", "If-fits-I-sits", "Julijana", "KingCat", "KitKat", "Kitten", "Lay", "Long", "Luz", "Maine Coon", "Maine coon", "Male", "Maskcat", "Meme", "Mimi", "Moomoo", "My cat(Mamay(мамай)) bebrik.xyz", "NSFW", "Nazi", "New Year", "NorthenCat", "Norwegian", "Norwegian Forest Cat", "OG", "OnTheNotebook", "Orange", "Oreo", "Oriental", "Outside", "Peekaboo", "Polysson", "PopcornTrap", "Quantico", "Ragdoll", "Relaxed", "Rex", "Roar", "SWS", "Sad", "Scout", "Screaming", "Shhhsh", "Shi", "Shiloh", "Shoes", "Siamese", "Sigma Ohio cat very skibidi", "Silly", "Sillykitty", "Simba", "Sink", "Sleep", "Sleeping", "Sleepy", "Smol", "Sniper", "Spots", "Steve jobs", "Summer", "Tabby", "Tabby  cute", "Tabbycat", "Tassilo", "Teeth", "Tent", "Tired cat", "TorWorld Cat", "Torte", "Torte Tabby", "Trippy", "Tuxedo", "TwoCats", "Village", "VoIP", "Wafer", "Waif", "Waits", "Weegie", "Wet", "White", "Wide", "Wide mouth", "X-MAS", "Yeet", "Zathras", "Zoomies", "a", "achievement", "acq", "action", "adult", "advent-calendar-2016", "afraid", "air_bed", "airpods", "alarming", "alcoholic", "aldris", "algebra", "alien", "ange", "angel", "angry", "angry cat", "annilou91", "annoyed", "anoyed", "anstrengend", "apple", "approaching", "arm", "arrogant", "art", "artist", "asking", "asleep", "attack", "attention", "attentive", "attitude", "ava", "avatar", "awake", "babby", "baby", "babycat", "back", "background", "backpack", "bad_photoshop", "baker", "baking", "ball", "bamgu", "bang", "banker", "banzai", "basin", "basket", "bath", "beautiful", "bed", "beer", "beg", "begging", "bella", "belly", "belly rubs", "bengal", "bent", "berlin", "best", "bestcat", "big", "big eyes", "big floof", "big-eyes", "bigfloppa", "binky", "bird", "birthday", "biscuit", "bitting", "black", "black & white", "black an white", "black and white", "black cat", "black scotish", "blackandwhite", "blanket", "blep", "blini", "blink", "blonde", "blue", "blue eyes", "blueeyes", "blur", "blurred", "blurry", "bobba eyes", "boi", "bombay", "bonus dog", "boop", "boot", "bored", "bossy", "boty", "bow", "box", "boxe", "brasileira", "brazilian", "brazilian cat", "bread", "breast", "british", "british shorthair", "british-shorthair", "broken", "brothers", "brown", "bubble", "bucket", "bun", "bunny", "burnt", "burrito", "burrito-cat", "business", "buubly", "bw", "cables", "cake", "calico", "calvin", "camera", "candle", "candy corn", "car", "caracal", "carrier", "carrot", "cars", "cartoon", "cash", "cat", "cat eyes", "cat face", "cat kneading", "cat meowing", "cat n frog", "cat on table", "cat wallpaper", "cat1", "cat_winston", "catcooking", "cats", "catstickerss", "catto", "caughtsnacking", "ceiling", "chair", "chaos", "check", "chicken", "chill", "chipi", "chocked", "chonker", "christmas", "chunky", "cinnamon roll", "circle", "clangen", "clawing", "cleaning", "climb", "close", "close-up", "closed", "closed eyes", "closeup", "clothes", "coat", "color", "colorful", "comfy", "computer", "confident", "confused", "console", "content", "cook", "cooking", "cool", "costume", "couch", "couple", "cow", "cowboy", "cozy", "crazy", "crazy russian pussycat", "cream", "creation", "creep", "crown", "cry", "crying", "cryptid", "cucumber", "cuddle", "cuddles", "cup", "curl", "curled", "curled up", "cut", "cute", "cute cat", "cutie", "daisy", "dance", "dancing", "dark", "dark brown", "dark vador", "darth", "darth vader", "dash", "davie412", "days", "dead", "decorating", "deflate", "depressed", "derp", "desk", "detective", "dev", "devcat", "devonrex", "devops", "dickface", "dictator", "didizin", "dinner!", "disappointed", "displeased", "dissatisfied", "distraction", "dj", "dnd", "dog", "dogstyle", "domini domino", "donna", "dot", "double", "down", "dozing", "dragon-li", "draw", "dream", "dress", "drink", "drone", "drool", "drugs", "drunk", "dumb", "dummy", "duo", "ear", "ears", "ears back", "eepy", "elderly", "elegant", "engineer", "evil", "excited", "exferal", "eye", "eyes", "eyes closed", "face", "facecat", "fail", "fall", "fancy", "fangs", "farted", "fat", "fat cat", "fatass", "fatfatpankocat", "faucet", "fedora", "feeding", "feet", "feline", "felix", "fell", "female", "female cat", "feral", "ferrero", "festive", "fight", "fighter", "file", "fire", "fisheye", "fist", "fit", "flat-faced", "floof", "floor", "flop", "floppa", "flower", "flowers", "fluffy", "fluffy pussy", "flying", "focused", "fold", "food", "food dish", "forest cat", "fotel", "fragile", "freeze", "fridge", "friends", "front_view", "fucker", "fun", "funn", "funny", "funny kitty", "furious", "furry", "gamer", "gaming", "ganmo", "garfield", "gas station", "gg", "gif", "ginger", "ginger cat", "girl", "glaring", "glass", "glassbreaker", "glow", "goober", "goodness_gracious", "goofy", "graceful", "grass", "gray", "greedy", "green", "green eyes", "gremlin", "grey", "grooming", "group", "grump", "grumpy", "guard", "guardian", "guilty", "gun", "gutter", "haha", "hairless", "halloween", "hammock", "hand", "handicapped", "handsome", "hangover", "happy", "hard", "harness", "hash_brown", "hat", "haunting", "hawaii", "head", "head tilt", "headinacup", "headphones", "heart", "hedgehog", "hehe", "held", "hello", "helpful", "hernan", "heterochromia", "hi", "hide", "hiding", "high_quality", "highway_hoop", "hilter", "himalayan", "hissing", "ho", "ho-wait", "hold", "holding", "holiday", "horror", "hot", "housemaid", "housepanther", "hovercat", "hug", "huge", "huh", "hulu", "human", "hunger", "hungry", "icecream", "idiotic", "if i fits i sits", "interesting", "interrupted", "italian st", "itsatrap", "ivy", "jacket", "jade", "jellybean toes toe beans grey gray mauve", "jellybean toes toebeans squished beans", "jinx", "jojo", "judgemental", "judging", "judgy", "julijana", "jump", "jumping", "kamilo", "keyboard", "kick", "kinky pussy", "kiss", "kitchencat", "kitler", "kitten", "kittenleg", "kittens", "kitty", "kittypet", "knocknoc", "kot", "kucing", "kuro", "lan", "lap", "laptop", "large", "lasagna", "lashes", "laugh", "laughing", "lay", "laying", "lazy", "lazy fuck", "leg", "legs", "lemonade", "lick", "licking", "lights", "like a boss", "lil", "lila", "lily", "linux", "lion", "littermates", "little", "loaf", "logan", "lol", "lolcat", "londrina", "londrinense", "long", "long hair", "long-cat", "long-hair", "long-haired", "longhair", "longhaired", "look", "looker", "looking", "looking at viewer", "looking away", "loopy", "lost", "lounge", "lounging", "love", "lovely", "low quality", "lowres", "luna", "lustful", "lying", "lying down", "lying-down", "lying-on-laptop", "lynxpoint", "macCat", "mackerel tabby", "mad", "magnifier", "magnifying glass", "maine", "maine coon", "maine-coon", "mainecoon", "male", "mama", "manspreading", "many", "marin", "marine", "mask", "massage", "mcdonalds", "mean", "meditating", "medium hair", "meet", "melon", "meme", "menacing", "meow", "messy", "metal", "mew", "mexican", "misty", "mix", "mixed", "mlem", "money", "moody", "morrigan", "morrigan witch of the wilds", "motion blur", "mouse", "mousecat", "mouth", "movement", "multi", "multicolored", "multiple", "multiple_colors", "munchkin", "murzik", "mustache", "müde", "nader", "nails", "nap", "nasty", "nature", "near", "needy", "nelly", "nelut", "network", "new year", "newyear", "nicecat", "night", "ninja", "no", "no background", "no bg", "nope", "norwegian", "norwegian forest cat", "nose", "nyan", "nyancat", "nyancat-gif", "obese", "ocean", "oden", "office", "old", "omg", "ominous", "on back", "on the piano", "one sock", "ooooo", "open", "open_mouth", "orange", "orange cat", "oriental", "outdoor", "outside", "ovni", "pain", "pair", "pan", "pancakes", "parents", "party", "pastic", "patched tabby", "patoka", "paw", "paw up", "paws", "pc", "pebba", "peekaboo", "peeking", "pencil", "peppa", "pepper", "persian", "persian cat", "petting", "photoshop", "piano", "pic", "pierced", "pillow", "pingu", "pink", "pino", "pippin", "plane", "plate", "play", "playful", "playing", "please", "pleased", "pleasing", "plinK", "plot", "plushie", "poptart", "portrait-worthy", "pose", "posing", "praise", "pretty", "printable", "professional", "programmer", "proud", "psychedelic", "puffy", "pumpkin", "punch", "puppy", "purple", "pussy", "pyret", "quality", "qwerty", "radical", "ragamuffin", "ragdoll", "rainbow", "random", "reaction", "reading", "record player", "red", "regal", "relax", "relaxed", "relaxing", "rest", "resting", "retard", "rich", "roaring", "roll", "rolling", "round", "round_face", "router", "rude", "running", "ruri", "russia", "russian blue", "ryes closed", "sad", "sad cat", "sad catto", "samurai", "santa", "sara", "sassy", "sat", "sauna cat", "savannah", "scared", "schmeckelz", "school", "school cat", "schottish", "scott", "scream", "screaming", "screams", "screm", "seeya!", "selfie", "serious", "serious face cat", "several", "shark", "shirt", "shit", "shnooze", "shocked", "shoe", "shoes", "short-haired", "shorthair", "shorthair cat", "shoxifykit", "shrek_ears", "shrimp", "siam", "siames", "siames tabby point", "siamese", "siberian", "siblings", "side view", "sideways", "sigma", "silly", "silver", "sing", "sisters", "sit", "sitting", "sitting at a stair", "sitting up", "slap", "sleep", "sleeping", "sleepy", "sleepy cat", "slick", "slide", "slip", "slow motion", "sluggish", "smack", "small", "small cat", "smart", "smile", "smirk", "smoking", "smol", "smug", "sniffing", "snoot", "snow", "snowshoe", "sock", "soda", "sofa", "soft", "soggy", "some", "soon", "sound", "space", "spaghetti", "speaking", "sphinx", "sphynx", "spicy", "spin", "spiral", "spooked", "spoon", "spots", "spotted", "spy", "square", "squeezed", "squint", "stack", "stair", "staline", "standardissue", "standing", "star", "star wars", "stare", "staring", "startled", "statue", "stealing", "stick", "stip", "store", "strange", "straw", "strawberry", "strech", "stretch", "stretched", "stretching", "stripe", "stripes", "strong", "stuck", "stupid", "style", "stylish", "suicide", "summer", "summon", "sun", "sun-bathing", "sunglass", "sunglasses", "sunlight", "sunny", "sunshi", "sunshibamgu", "supercat", "supermodel", "suprised", "surf", "surprise", "surprised", "sushi", "sweet", "sweetheart", "swimming", "sws", "tabby", "table", "tail", "tair", "tech", "teeth", "telephony", "tender", "terminal", "territorial", "testdfsa", "they are coming", "thicc", "thief", "thinker", "thinking", "thoughtful", "thug", "tie", "tiger", "tiktok", "tinny", "tiny", "tiny baby", "tired", "toebeans", "tofi", "tom", "tomcat", "tongue", "tongue out", "toni", "tooth", "torbie", "tortie", "tortoiseshell", "tortoiseshell cat", "toys", "transparent", "trap", "trapped", "tree", "tricolor", "triggered", "trump", "tryhard", "tryhard_cat", "tummy", "turntable", "tux", "tuxedo", "tuxedo cat", "tuxido", "twins", "twitter", "two", "two cats", "twocats", "twoface", "typing", "ugg", "ugly", "unhappy", "unicorn", "unimpressed", "unit", "up", "up to 3kgs", "upii", "upset", "uwu", "v for vendetta", "vacuum", "vader", "vador", "valentine", "vegetable", "vending machine", "very cute", "victorious-cat", "victory", "violent", "void", "waiting", "wakup", "walking", "warcat", "watch", "watcher", "watching", "water", "water balloon", "watermelon", "watter cat", "weinstein", "weird", "whiskers", "white", "white muzzle", "white spots", "white_fur", "why", "wide", "wide-eyes", "wikipedia", "window", "wing", "wink", "witch", "with white", "wood", "work", "worker", "working", "workspace", "wtf", "xbox", "xena", "yang", "yard", "yawn", "yawning", "yeay", "yellow", "ying", "yoga", "young", "zombie", "zoomies", "zusia", "Котенок", "Кошка", "Кошки", "балдежный", "играет", "кушает", "милый", "пухляк", "пушистая", "спит", "у_окошка", "なら"
]

def load_image(url):
    try:
        response = requests.get(url)
        response.raise_for_status()
        image_data = BytesIO(response.content)
        img = Image.open(image_data)
        img.thumbnail((600, 480), Image.Resampling.LANCZOS)
        return ImageTk.PhotoImage(img)
    except Exception as e:
        print(f"Произошла ошибка: {e}")
        return None

def open_new_window():
    tag = tag_combobox.get()
    url_tag = f'https://cataas.com/cat/{tag}' if tag else 'https://cataas.com/cat'
    img = load_image(url_tag)

    if img:
        new_window = Toplevel()
        new_window.title("Картинка с котиком")
        new_window.geometry("600x480")
        label = Label(new_window, image=img)
        label.image = img
        label.pack()

def exit():
    window.destroy()

window = Tk()
window.title("Cats!")
window.geometry("600x520")

menu_bar = Menu(window)
window.config(menu=menu_bar)

# update_button = Button(text="Обновить", command=set_image)
# update_button.pack()

file_menu = Menu(menu_bar, tearoff=0)
menu_bar.add_cascade(label="Файл", menu=file_menu)
file_menu.add_command(label="Загрузить фото", command=open_new_window)
file_menu.add_separator()
file_menu.add_command(label="Выход", command=exit)

url = 'https://cataas.com/cat'
img = load_image(url)

tag_label = Label(text="Выбери тег")
tag_label.pack()

tag_combobox = ttk.Combobox(values=ALLOWED_TAGS)
tag_combobox.pack()

load_button = Button(text="Загрузить по тегу", command=open_new_window)
load_button.pack()

window.mainloop()